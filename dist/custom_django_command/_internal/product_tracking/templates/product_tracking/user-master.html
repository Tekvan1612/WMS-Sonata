{#user-master.html#}
{% include 'product_tracking/head.html' %}

{% block content %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <script>
        $(document).ready(function () {
            let currentPage = 1;
            const pageSize = 10;
            let totalItems = 0;

            function fetchUserList() {
                console.log("Fetching user list...");
                $.ajax({
                    url: '/user_list/',
                    type: 'GET',
                    success: function (data) {
                        console.log("User list fetched successfully:", data);
                        totalItems = data.length;
                        const startIdx = (currentPage - 1) * pageSize;
                        const endIdx = startIdx + pageSize;
                        const usersOnCurrentPage = data.slice(startIdx, endIdx);

                        $('#user-table-body').empty();
                        $.each(usersOnCurrentPage, function (index, user) {
                            const modules = Array.isArray(user.modules) ? user.modules : [];
                            var modulesList = '<ul style="list-style-type: disc; padding-left: 20px;">';
                            modules.forEach(function (module) {
                                if (module) {
                                    modulesList += '<li>' + module + '</li>';
                                }
                            });
                            modulesList += '</ul>';
                            var row = '<tr data-user-id="' + user.user_id + '">' +
                                '<input type="hidden" class="user-id" value="' + user.user_id + '">' +
                                '<td>' + user.user_name + '</td>' +
                                '<td>' + user.password + '</td>' +
                                '<td>' + (user.status ? 'Active' : 'Inactive') + '</td>' +
                                '<td>' + modulesList + '</td>' +
                                '<td>' + user.created_by + '</td>' +
                                '<td>' + user.created_date_time + '</td>' +
                                '<td>' +
                                '<button class="btn btn-sm btn-primary edit-btn me-2" style="margin-bottom: 5px;"><i class="fa fa-pencil"></i> Edit</button>' +
                                '<button class="btn btn-sm btn-danger delete-btn" style="margin-top: 5px;"><i class="fa fa-trash"></i> Delete</button>' +
                                '</td>' +
                                '</tr>';
                            $('#user-table-body').append(row);
                        });
                        updatePaginationCount(totalItems);
                    },
                    error: function (xhr, status, error) {
                        console.error('Error fetching user data:', error);
                    }
                });
            }

            function updatePaginationCount(totalItems) {
                const totalPages = Math.ceil(totalItems / pageSize);
                const startRange = (currentPage - 1) * pageSize + 1;
                const endRange = Math.min(currentPage * pageSize, totalItems);

                $('#pagination-count').text(`Showing ${startRange} to ${endRange} of ${totalItems} entries`);

                console.log(`Current Page: ${currentPage}, Total Pages: ${totalPages}, Start Range: ${startRange}, End Range: ${endRange}`);
            }

            $('#prev-page-btn').on('click', function () {
                if (currentPage > 1) {
                    currentPage--;
                    console.log("Previous Page Clicked. Current Page:", currentPage);
                    fetchUserList();
                }
            });

            $('#next-page-btn').on('click', function () {
                const totalPages = Math.ceil(totalItems / pageSize);
                if (currentPage < totalPages) {
                    currentPage++;
                    console.log("Next Page Clicked. Current Page:", currentPage);
                    fetchUserList();
                }
            });

            fetchUserList();

            $(document).on('click', '.edit-btn', function () {
                var row = $(this).closest('tr');
                var userId = row.data('user-id');
                var username = row.find('td:eq(0)').text();
                var password = row.find('td:eq(1)').text();
                var status = row.find('td:eq(2)').text() === 'Active' ? 'Active' : 'Inactive';
                var modules = [];
                row.find('td:eq(3)').find('li').each(function () {
                    modules.push($(this).text().trim());
                });

                console.log("User ID before setting:", userId);
                console.log("User Id :", userId);
                console.log("Modules :", modules);
                console.log("Status :", status);

                // Set values in the edit form
                $('#editUserId').val(userId);
                $('#editUsername').val(username);
                $('#editPassword').val(password);
                $('#editStatus').val(status);

                // Checkboxes for modules
                $('.form-check-input').each(function () {
                    var moduleValue = $(this).val();
                    console.log("Checking module:", moduleValue);
                    $(this).prop('checked', modules.includes(moduleValue));
                });

                // Show the edit modal
                $('#editUserModal').modal('show');
            });

            function getCookie(name) {
                var cookieValue = null;
                if (document.cookie && document.cookie !== '') {
                    var cookies = document.cookie.split(';');
                    for (var i = 0; i < cookies.length; i++) {
                        var cookie = cookies[i].trim();
                        if (cookie.substring(0, name.length + 1) === (name + '=')) {
                            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                            break;
                        }
                    }
                }
                return cookieValue;
            }

            var csrftoken = getCookie('csrftoken');

            // Add User form submission with AJAX
            $('#addUserForm').on('submit', function (e) {
                e.preventDefault();

                const formData = $(this).serialize();

                $.ajax({
                    url: $(this).attr('action'),
                    type: 'POST',
                    data: formData,
                    success: function (data) {
                        if (data.message === 'User Added successfully') {
                            alert('User Added Successfully');
                            $('#addUserForm')[0].reset();
                            fetchUserList();
                        } else {
                            alert('Error adding User');
                        }
                    },
                    error: function (xhr, status, error) {
                        console.error('Error adding user:', error);
                    }
                });
            });

            $('#editUserForm').submit(function (e) {
                e.preventDefault();
                var userId = $('#editUserId').val();
                var username = $('#editUsername').val();
                var password = $('#editPassword').val();
                var status = $('#editStatus').val();
                var modules = [];

                // Get selected modules and remove duplicates
                $('.form-check-input:checked').each(function () {
                    var module = $(this).val();
                    if (!modules.includes(module)) {
                        modules.push(module);
                    }
                });

                console.log("Submitting edit form with data:", {
                    'user_id': userId,
                    'user_name': username,
                    'password': password,
                    'status': status,
                    'modules': modules
                });

                $.ajax({
                    url: '/update_user/' + userId + '/',
                    type: 'POST',
                    headers: {
                        'X-CSRFToken': csrftoken
                    },
                    data: {
                        'user_id': userId,
                        'user_name': username,
                        'password': password,
                        'status': status,
                        'modules': JSON.stringify(modules)
                    },
                    success: function (updatedUser) {
                        console.log('User details updated successfully:', updatedUser);
                        $('#editUserModal').modal('hide');
                        fetchUserList();
                        location.reload()
                    },
                    error: function (xhr, status, error) {
                        console.error('Error updating user details:', error);
                    }
                });
            });


            $('#user-table-body').on('click', '.delete-btn', function () {
                const userId = $(this).closest('tr').data('user-id');
                console.log(`Attempting to delete user with ID: ${userId}`);
                if (confirm("Are you sure you want to delete this user?")) {
                    $.ajax({
                        url: `/delete_user/${userId}/`,
                        type: 'POST',
                        headers: {
                            'X-CSRFToken': csrftoken
                        },
                        success: function (data) {
                            console.log('Delete request successful:', data);
                            if (data.message === 'User deleted successfully') {
                                console.log('User deleted successfully');
                                alert('User deleted successfully');
                                fetchUserList(); // Reload user list
                            } else {
                                console.log('Delete request response message is not success:', data.message);
                                alert(data.message);
                            }
                        },
                        error: function (xhr, status, error) {
                            console.error('Error deleting user:', error);
                        }
                    });
                }
            });

            $('#editUserModal').on('click', '[data-dismiss="modal"]', function () {
                $('#editUserModal').modal('hide');
            });

            function validatePassword(password) {
                const minLength = 8;
                const maxLength = 10;
                const hasUpperCase = /[A-Z]/.test(password);
                const hasNumber = /\d/.test(password);
                const hasSpecialChar = /[!@#$%^&*(),.?":{}|<>]/.test(password);

                if (password.length < minLength || password.length > maxLength) {
                    return "Password must be between 8 and 10 characters.";
                }
                if (!hasUpperCase) {
                    return "Password must contain at least one uppercase letter.";
                }
                if (!hasNumber) {
                    return "Password must contain at least one number.";
                }
                if (!hasSpecialChar) {
                    return "Password must contain at least one special character.";
                }
                return "";
            }

            $('#password').on('input', function () {
                const password = $(this).val();
                const validationMessage = validatePassword(password);
                $(this).get(0).setCustomValidity(validationMessage);
            });

            $('#editPassword').on('input', function () {
                const password = $(this).val();
                const validationMessage = validatePassword(password);
                $(this).get(0).setCustomValidity(validationMessage);
            });

            $('#editUserForm').submit(function (e) {
                const password = $('#editPassword').val();
                const validationMessage = validatePassword(password);

                if (validationMessage !== "") {
                    e.preventDefault();
                    alert(validationMessage);
                } else {
                    // Proceed with form submission
                }
            });
        });
    </script>
    <body>

    <!-- Begin page -->
    <div id="layout-wrapper">

        <!-- ========== App Menu ========== -->
        {% include 'product_tracking/menu.html' %}
        <!-- Left Sidebar End -->
        <!-- Vertical Overlay-->
        <div class="vertical-overlay"></div>
        {% include 'product_tracking/header.html' %}
        <div class="wrapper"></div>

        <!-- ============================================================== -->
        <!-- Start right Content here -->
        <!-- ============================================================== -->
        <div class="main-content">
            <div class="page-content">
                <div class="container-fluid">

                    <!-- start page title -->
                    <div class="row">
                        <div class="col-12">
                            <div class="page-title-box d-sm-flex align-items-center justify-content-between">
                                <h4 class="mb-sm-0">User Management</h4>

                                <div class="page-title-right">
                                    <ol class="breadcrumb m-0">
                                        <li class="breadcrumb-item"><a href="javascript: void(0);">Master Management</a>
                                        </li>
                                        <li class="breadcrumb-item active">User Management</li>
                                    </ol>
                                </div>

                            </div>
                        </div>
                    </div>
                    <!-- end page title -->


                    <div class="row">
                        <div class="col-lg-12">
                            <div class="card">
                                <div class="card-header">
                                    <h4 class="card-title mb-0">Add User</h4>
                                </div><!-- end card header -->
                                <div class="card-body">

                                    <form method="POST" action="{% url 'product_tracking:add_user' %}" id="addUserForm">
                                        {% csrf_token %}
                                        <div class="row g-3">
                                            <input type="hidden" name="user_id" id="user-id" value="">
                                            <div class="col-lg-6">
                                                <div class="form-floating">
                                                    <input type="text" name="username" class="form-control"
                                                           id="username" placeholder="Enter your UserName" required>
                                                    <label for="username">User Name</label>
                                                </div>
                                            </div>
                                            <div class="col-lg-6">
                                                <div class="form-floating">
                                                    <input type="password" name="password" class="form-control"
                                                           id="password" placeholder="Password" required
                                                           pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=]).{8,10}"
                                                           title="Password must be 8-10 characters long, contain at least one number, one uppercase letter, and one special character.">
                                                    <label for="password">Password</label>
                                                </div>
                                            </div>
                                            <div class="col-lg-6">
                                                <div class="form-floating">
                                                    <select name="status" class="form-select" id="floatingSelect"
                                                            aria-label="Floating label select example">
                                                        <option value="1" selected>Active</option>
                                                        <option value="0">Inactive</option>
                                                    </select>
                                                    <label for="floatingSelect">Status</label>
                                                </div>
                                            </div>
                                            <div class="col-lg-6">
                                                <label for="modules">Modules:</label>
                                                <div class="checkbox-container" style="column-count: 2;">
                                                    <div class="form-check form-check-inline"
                                                         style="break-inside: avoid;">
                                                        <input class="form-check-input" type="checkbox"
                                                               id="inlineCheckbox6" name="modules"
                                                               value="User Management">
                                                        <label class="form-check-label" for="inlineCheckbox6">User
                                                            Management</label>
                                                    </div>
                                                    <div class="form-check form-check-inline"
                                                         style="break-inside: avoid;">
                                                        <input class="form-check-input" type="checkbox"
                                                               id="inlineCheckbox7" name="modules"
                                                               value="Item Master">
                                                        <label class="form-check-label" for="inlineCheckbox7">Item
                                                            Master</label>
                                                    </div>
                                                    <div class="form-check form-check-inline"
                                                         style="break-inside: avoid;">
                                                        <input class="form-check-input" type="checkbox"
                                                               id="inlineCheckbox11" name="modules"
                                                               value="Production Line master">
                                                        <label class="form-check-label"
                                                               for="inlineCheckbox11">Production Line Master</label>
                                                    </div>
                                                    <div class="form-check form-check-inline"
                                                         style="break-inside: avoid;">
                                                        <input class="form-check-input" type="checkbox"
                                                               id="inlineCheckbox11" name="modules"
                                                               value="Tolerance Master">
                                                        <label class="form-check-label"
                                                               for="inlineCheckbox11">Tolerance Master</label>
                                                    </div>
                                                    <div class="form-check form-check-inline"
                                                         style="break-inside: avoid;">
                                                        <input class="form-check-input" type="checkbox"
                                                               id="inlineCheckbox11" name="modules"
                                                               value="Production Order Creation">
                                                        <label class="form-check-label"
                                                               for="inlineCheckbox11">Production Order Creation</label>
                                                    </div>
                                                    <div class="form-check form-check-inline"
                                                         style="break-inside: avoid;">
                                                        <input class="form-check-input" type="checkbox"
                                                               id="inlineCheckbox8" name="modules"
                                                               value="Label Printing">
                                                        <label class="form-check-label" for="inlineCheckbox8">Label
                                                            Printing</label>
                                                    </div>
                                                    <div class="form-check form-check-inline"
                                                         style="break-inside: avoid;">
                                                        <input class="form-check-input" type="checkbox"
                                                               id="inlineCheckbox9" name="modules"
                                                               value="Label Reprinting">
                                                        <label class="form-check-label" for="inlineCheckbox9">Label
                                                            Reprinting</label>
                                                    </div>
                                                    <div class="form-check form-check-inline"
                                                         style="break-inside: avoid;">
                                                        <input class="form-check-input" type="checkbox"
                                                               id="inlineCheckbox10" name="modules"
                                                               value="Printer Master">
                                                        <label class="form-check-label" for="inlineCheckbox10">Printer
                                                            Master</label>
                                                    </div>
                                                    <div class="form-check form-check-inline"
                                                         style="break-inside: avoid;">
                                                        <input class="form-check-input" type="checkbox"
                                                               id="inlineCheckbox11" name="modules" value="Reports">
                                                        <label class="form-check-label"
                                                               for="inlineCheckbox11">Reports</label>
                                                    </div>
                                                    <div class="form-check form-check-inline"
                                                         style="break-inside: avoid;">
                                                        <input class="form-check-input" type="checkbox"
                                                               id="inlineCheckbox11" name="modules"
                                                               value="Quality Control">
                                                        <label class="form-check-label"
                                                               for="inlineCheckbox11">Quality Control</label>
                                                    </div>
                                                    <div class="form-check form-check-inline"
                                                         style="break-inside: avoid;">
                                                        <input class="form-check-input" type="checkbox"
                                                               id="inlineCheckbox12" name="modules"
                                                               value="Material Issue">
                                                        <label class="form-check-label"
                                                               for="inlineCheckbox12">Material Issue</label>
                                                    </div>
                                                    <div class="form-check form-check-inline"
                                                         style="break-inside: avoid;">
                                                        <input class="form-check-input" type="checkbox"
                                                               id="inlineCheckbox13" name="modules"
                                                               value="Material Receiving">
                                                        <label class="form-check-label"
                                                               for="inlineCheckbox13">Material Receiving</label>
                                                    </div>
                                                    <div class="form-check form-check-inline"
                                                         style="break-inside: avoid;">
                                                        <input class="form-check-input" type="checkbox"
                                                               id="inlineCheckbox14" name="modules" value="Dispatch">
                                                        <label class="form-check-label"
                                                               for="inlineCheckbox14">Dispatch</label>
                                                    </div>
                                                    <div class="form-check form-check-inline"
                                                         style="break-inside: avoid;">
                                                        <input class="form-check-input" type="checkbox"
                                                               id="inlineCheckbox15" name="modules"
                                                               value="Stock Inventory">
                                                        <label class="form-check-label"
                                                               for="inlineCheckbox15">Stock Inventory</label>
                                                    </div>
                                                    <div class="form-check form-check-inline"
                                                         style="break-inside: avoid;">
                                                        <input class="form-check-input" type="checkbox"
                                                               id="inlineCheckbox15" name="modules"
                                                               value="Short Closure">
                                                        <label class="form-check-label"
                                                               for="inlineCheckbox15">Short Closure</label>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-12">
                                                <div class="text-end">
                                                    <button type="submit" class="btn btn-primary">Submit</button>
                                                </div>
                                            </div>
                                        </div>
                                    </form>

                                </div>
                            </div>
                        </div>
                    </div><!--end col-->
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="card-title mb-0">User List</h5>
                                </div>
                                <div class="card-body">
                                    <table id="user-table"
                                           class="table table-bordered dt-responsive nowrap table-striped align-middle"
                                           style="width:100%">
                                        <thead style="background: rgba(155,198,221,0.58)">
                                        <tr>
                                            <th>UserName</th>
                                            <th>Password</th>
                                            <th>Status</th>
                                            <th>Authorized Modules</th>
                                            <th>Added By</th>
                                            <th>Created Date</th>
                                            <th>Action</th>
                                        </tr>
                                        </thead>
                                        <tbody id="user-table-body">

                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div><!--end col-->
                        <div class="d-flex justify-content-between align-items-center mt-3">
                            <div id="pagination-count" style="padding: 10px;">Showing 0 to 0 of 0 entries</div>
                            <div style="padding-bottom: 10px;margin: 5px;">
                                <button id="prev-page-btn" class="btn btn-primary me-2">Previous</button>
                                <button id="next-page-btn" class="btn btn-primary">Next</button>
                            </div>
                        </div>
                    </div><!--end row-->
                </div><!--end row-->

                <!-- Edit User Modal -->
                <div id="editUserModal" class="modal fade">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h2 class="modal-title">Edit User</h2>
                            </div>
                            <div class="modal-body">
                                <form id="editUserForm">
                                    <input type="hidden" id="editUserId" name="editUserId">
                                    <div class="form-group">
                                        <label for="editUsername"><b>Username:</b></label>
                                        <input type="text" class="form-control" id="editUsername" name="editUsername">
                                    </div>
                                    <div class="form-group">
                                        <label for="editPassword" style="margin-top: 15px;"><b>Password:</b></label>
                                        <input type="password" class="form-control" id="editPassword"
                                               name="editPassword">
                                    </div>
                                    <div class="form-group" style="margin-top: 20px;">
                                        <label for="editStatus"><b>Status:</b></label>
                                        <select class="form-control" id="editStatus" name="editStatus">
                                            <option value="Active">Active</option>
                                            <option value="Inactive">Inactive</option>
                                        </select>
                                    </div>
                                    <div class="form-group" style="margin-top: 30px;">
                                        <label for="editModules"><b>Modules:</b></label>
                                        <div class="checkbox-container" style="column-count: 2;">
                                            <div class="form-check form-check-inline" style="break-inside: avoid;">
                                                <input class="form-check-input" type="checkbox" id="inlineCheckbox6"
                                                       name="modules" value="User Management">
                                                <label class="form-check-label" for="inlineCheckbox6">User
                                                    Management</label>
                                            </div>
                                            <div class="form-check form-check-inline" style="break-inside: avoid;">
                                                <input class="form-check-input" type="checkbox" id="inlineCheckbox7"
                                                       name="modules" value="Item Master">
                                                <label class="form-check-label" for="inlineCheckbox7">Item
                                                    Master</label>
                                            </div>
                                            <div class="form-check form-check-inline" style="break-inside: avoid;">
                                                <input class="form-check-input" type="checkbox" id="inlineCheckbox11"
                                                       name="modules" value="Production Line Master">
                                                <label class="form-check-label" for="inlineCheckbox11">Production Line
                                                    Master</label>
                                            </div>
                                            <div class="form-check form-check-inline" style="break-inside: avoid;">
                                                <input class="form-check-input" type="checkbox" id="inlineCheckbox11"
                                                       name="modules" value="Tolerance Master">
                                                <label class="form-check-label" for="inlineCheckbox11">Tolerance
                                                    Master</label>
                                            </div>
                                            <div class="form-check form-check-inline" style="break-inside: avoid;">
                                                <input class="form-check-input" type="checkbox" id="inlineCheckbox11"
                                                       name="modules" value="Production Order Creation">
                                                <label class="form-check-label" for="inlineCheckbox11">Production Order
                                                    Creation</label>
                                            </div>
                                            <div class="form-check form-check-inline" style="break-inside: avoid;">
                                                <input class="form-check-input" type="checkbox" id="inlineCheckbox8"
                                                       name="modules" value="Label Printing">
                                                <label class="form-check-label" for="inlineCheckbox8">Label
                                                    Printing</label>
                                            </div>
                                            <div class="form-check form-check-inline" style="break-inside: avoid;">
                                                <input class="form-check-input" type="checkbox" id="inlineCheckbox9"
                                                       name="modules" value="Label Reprinting">
                                                <label class="form-check-label" for="inlineCheckbox9">Label
                                                    Reprinting</label>
                                            </div>
                                            <div class="form-check form-check-inline" style="break-inside: avoid;">
                                                <input class="form-check-input" type="checkbox" id="inlineCheckbox10"
                                                       name="modules" value="Printer Master">
                                                <label class="form-check-label" for="inlineCheckbox10">Printer
                                                    Master</label>
                                            </div>
                                            <div class="form-check form-check-inline" style="break-inside: avoid;">
                                                <input class="form-check-input" type="checkbox" id="inlineCheckbox11"
                                                       name="modules" value="Reports">
                                                <label class="form-check-label" for="inlineCheckbox11">Reports</label>
                                            </div>
                                            <div class="form-check form-check-inline" style="break-inside: avoid;">
                                                <input class="form-check-input" type="checkbox" id="inlineCheckbox11"
                                                       name="modules" value="Quality Control">
                                                <label class="form-check-label" for="inlineCheckbox11">Quality
                                                    Control</label>
                                            </div>
                                            <div class="form-check form-check-inline" style="break-inside: avoid;">
                                                <input class="form-check-input" type="checkbox" id="inlineCheckbox12"
                                                       name="modules" value="Material Issue">
                                                <label class="form-check-label" for="inlineCheckbox12">Material
                                                    Issue</label>
                                            </div>
                                            <div class="form-check form-check-inline" style="break-inside: avoid;">
                                                <input class="form-check-input" type="checkbox" id="inlineCheckbox13"
                                                       name="modules" value="Material Receiving">
                                                <label class="form-check-label" for="inlineCheckbox13">Material
                                                    Receiving</label>
                                            </div>
                                            <div class="form-check form-check-inline" style="break-inside: avoid;">
                                                <input class="form-check-input" type="checkbox" id="inlineCheckbox14"
                                                       name="modules" value="Dispatch">
                                                <label class="form-check-label" for="inlineCheckbox14">Dispatch</label>
                                            </div>
                                            <div class="form-check form-check-inline" style="break-inside: avoid;">
                                                <input class="form-check-input" type="checkbox" id="inlineCheckbox15"
                                                       name="modules" value="Stock Inventory">
                                                <label class="form-check-label" for="inlineCheckbox15">Stock
                                                    Inventory</label>
                                            </div>
                                            <div class="form-check form-check-inline" style="break-inside: avoid;">
                                                <input class="form-check-input" type="checkbox" id="inlineCheckbox15"
                                                       name="modules" value="Short Closure">
                                                <label class="form-check-label" for="inlineCheckbox15">Short
                                                    Closure</label>
                                            </div>
                                        </div>
                                    </div>
                                    <button type="submit" class="btn btn-primary" style="margin-top: 30px;">Save
                                        Changes
                                    </button>
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal"
                                            style="margin-top: 30px;">Cancel
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>


            </div><!-- container-fluid -->
        </div>
        <!-- End Page-content -->

        {% include 'product_tracking/footer.html' %}

    </div>
    <!-- end main content-->
    <!-- END layout-wrapper -->

    <!--start back-to-top-->
    <button class="btn btn-dark btn-icon" id="back-to-top">
        <i class="bi bi-caret-up fs-3xl"></i>
    </button>
    <!--end back-to-top-->

    <!--preloader-->
    <div id="preloader">
        <div id="status">
            <div class="spinner-border text-primary avatar-sm" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
    </div>
    </body>
{% endblock %}
